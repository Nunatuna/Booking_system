import{j as e,r,B as p,M as g,G as u,a as m,c as h}from"./index-18sk25uz.js";import{P as y,S as j,N as b}from"./Spinner-DFkIJYwz.js";import{a as S,T as C}from"./Title-Bx4t_-jr.js";import{N as B}from"./NavBar-CkU5bnsS.js";const k={display:"flex",flexDirection:"row",alignItems:"center",flex:"1 1 calc(100% - 30px)",padding:"12px 20px",border:"1px solid #364FC7",borderRadius:"32px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",marginBottom:"15px"},D={fontSize:"14px",fontWeight:"bold",color:"#364FC7",marginBottom:"5px",marginTop:"0px"},F={fontSize:"14px",fontWeight:"bold",color:"#333",margin:"0px"};function v({room:t,children:o}){const n=s=>new Date(s).toLocaleString("da-DK",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1});return e.jsxs("p",{style:k,children:[e.jsxs("div",{children:[e.jsx("p",{style:D,children:e.jsx("span",{children:t.Room_name})}),e.jsx("p",{style:F,children:e.jsxs("span",{children:[n(t.Start_time)," - ",n(t.End_time)]})})]}),o]})}const f=({roomId:t})=>{const[o,n]=r.useState(!1),[s,i]=r.useState(!1),a=async()=>{n(!0);const x=m(),{error:l}=await x.from("MeetingRooms").update({isBooked:!0}).eq("id",t);l?console.error("Error confirming the booking:",l):window.location.reload(),n(!1),i(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(p,{style:{marginLeft:"auto"},onClick:()=>i(!0),disabled:o,variant:"filled",color:"#364FC7",radius:"xl",children:"BOOK"}),e.jsxs(g,{opened:s,onClose:()=>i(!1),title:"Confirm Booking",centered:!0,children:[e.jsx(S,{style:{marginBottom:"20px"},children:"Are you sure you want to confirm this booking?"}),e.jsxs(u,{justify:"space-between",grow:!0,children:[e.jsx(p,{variant:"default",onClick:()=>i(!1),disabled:o,children:"Cancel"}),e.jsx(p,{onClick:a,disabled:o,color:"#364FC7",variant:"filled",children:"Confirm Booking"})]})]})]})};f.propTypes={roomId:y.number.isRequired};function w({rooms:t}){return e.jsx("div",{style:c.container,children:e.jsxs("div",{style:c.ledigeCard,children:[e.jsx(C,{style:c.heading,order:1,children:"Ledige lokaler i dag: "}),e.jsx("div",{style:c.cardContainer,children:t.map(o=>e.jsx(v,{room:o,children:e.jsx(f,{})},o.id))})]})})}const c={container:{fontFamily:"Arial, sans-serif"},ledigeCard:{backgroundColor:"#DBE4FF",padding:"10%",borderRadius:"10px",display:"inline-block",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)",width:"531px",minHeight:"530px"},heading:{textAlign:"center",fontSize:"24px",color:"#364FC7",marginBottom:"20px"},cardContainer:{display:"flex",flexDirection:"column"},roomCard:{border:"1px solid #3F51B5",borderRadius:"10px",display:"flex",justifyContent:"space-between",alignItems:"center",width:"80%",maxWidth:"400px",padding:"10px 20px",marginBottom:"15px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"},roomInfo:{textAlign:"left"},roomName:{fontSize:"16px",fontWeight:"bold",margin:"0 0 5px 0",color:"#2E3A59"},roomTime:{fontSize:"14px",margin:0,color:"#607D8B"},button:{fontSize:"14px",backgroundColor:"#3F51B5",color:"#FFFFFF",padding:"8px 15px",border:"none",borderRadius:"20px",cursor:"pointer"}},R={display:"flex",flexDirection:"column",marginTop:"20px"},E=()=>{const[t,o]=r.useState(null),n=m();return r.useEffect(()=>{(async()=>{const{data:i}=await n.auth.getUser();if(i.user){const a=i.user.user_metadata.display_name;o(a||"Guest")}})()},[n]),e.jsx("div",{style:R,children:t?e.jsxs("h2",{style:{margin:"0px"},children:["Velkommen tilbage, ",t,"!"]}):e.jsx("p",{children:"Ikke logget ind"})})},T=()=>{const[t,o]=r.useState("");return r.useEffect(()=>{const s=new Date().toLocaleDateString();o(s)},[]),e.jsx("p",{style:{margin:"0px"},children:t})},M=h("/OpretBooking")({component:L});function L(){const[t,o]=r.useState([]),[n,s]=r.useState(!0);return r.useEffect(()=>{async function i(){s(!0);const a=m(),{data:x,error:l}=await a.from("MeetingRooms").select("id, Room_name, Start_time, End_time");l?console.error("Error fetching meeting rooms:",l):o(x),s(!1)}i()},[]),n?e.jsx("div",{style:N,children:e.jsx(j,{})}):e.jsxs("div",{children:[e.jsx(B,{}),e.jsxs("div",{style:d.nybookingcontainer,children:[e.jsxs("div",{style:d.hejallan,children:[e.jsx(E,{}),e.jsx(T,{})]}),e.jsxs("div",{style:d.container,children:[e.jsx("div",{style:d.component,children:e.jsx(b,{})}),e.jsx("div",{style:d.component,children:e.jsx(w,{rooms:t})})]})]})]})}const N={display:"flex",justifyContent:"center",marginTop:"200px"},d={nybookingcontainer:{display:"flex",flexDirection:"column",alignItems:"center"},container:{display:"flex",alignItems:"flex-start",gap:"70px"},component:{flex:"1 1 45%",maxWidth:"500px"},hejallan:{alignSelf:"flex-start",textAlign:"left",marginBottom:"20px",marginLeft:"225px",paddingTop:"55px"}};export{M as Route,L as default};
