import{r as l,j as e,B as m,M as j,G as x,g,c as y}from"./index-DBG34nJh.js";import{u as b}from"./useRouteContext-DjzGr4HA.js";import{S as C,N as S}from"./Spinner-B4r4uBKd.js";import{P as f}from"./index-CNRNVQDd.js";import{T as u}from"./Text-CqnwmanK.js";import{T as R}from"./Title-q04z54dx.js";import{N as k}from"./NavBar-ClJflKS3.js";const h=({roomId:t,onCancel:d})=>{const[i,a]=l.useState(!1),[c,s]=l.useState(!1),o=async()=>{a(!0);const n=g(),{error:r}=await n.from("MeetingRooms").delete().eq("id",t);r?console.error("Error deleting the booking:",r):d(t),a(!1),s(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(m,{style:{marginLeft:"auto"},onClick:()=>s(!0),disabled:i,variant:"filled",color:"#364FC7",radius:"xl",children:"Cancel Booking"}),e.jsxs(j,{opened:c,onClose:()=>s(!1),title:"Cancel Booking",centered:!0,children:[e.jsx(u,{style:{marginBottom:"20px"},children:"Are you sure you want to cancel this booking?"}),e.jsxs(x,{justify:"space-between",grow:!0,children:[e.jsx(m,{variant:"default",onClick:()=>s(!1),disabled:i,children:"No, Keep It"}),e.jsx(m,{onClick:o,disabled:i,color:"#364FC7",variant:"filled",children:"Cancel Booking"})]})]})]})};h.propTypes={roomId:f.number.isRequired,onCancel:f.func.isRequired};const B={display:"flex",justifyContent:"center",marginTop:"200px"},v={display:"flex",flexDirection:"column",padding:"40px",maxWidth:"800px",margin:"0 auto",backgroundColor:"#ffffff",border:"1px solid #e3e3e3",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)"},w={justifyContent:"center",backgroundColor:"#DBE4FF",borderRadius:"20px",padding:"20px",gap:"15px"},F={flex:"100%",padding:"0.8rem 1.5rem",border:"1px solid #364FC7",borderRadius:"2rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},E=()=>{const[t,d]=l.useState([]),[i,a]=l.useState(!0);l.useEffect(()=>{async function o(){a(!0);const n=g(),{data:r,error:p}=await n.from("MeetingRooms").select("id, Room_name, Start_time, End_time");p?console.error("Error fetching meeting rooms:",p):d(r),a(!1)}o()},[]);const c=o=>{d(n=>n.filter(r=>r.id!==o))};if(i)return e.jsxs("div",{style:B,children:[e.jsx(C,{})," "]});const s=o=>new Date(o).toLocaleString("en-US",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1});return e.jsxs("div",{style:v,children:[e.jsx(R,{c:"#364FC7",order:1,style:{marginBottom:"2rem"},children:"My Bookings"}),e.jsx("div",{style:w,children:t.length>0?e.jsx(x,{justify:"space-between",gap:"xs",children:t.map(o=>e.jsxs(x,{style:F,children:[e.jsxs("div",{children:[e.jsx(u,{c:"#364FC7",fw:500,size:"md",children:o.Room_name}),e.jsxs(u,{fw:400,size:"md",children:[s(o.Start_time)," - ",s(o.End_time)]})]}),e.jsx(h,{roomId:o.id,onCancel:c})]},o.id))}):e.jsxs("div",{children:[e.jsx("p",{children:"You donâ€™t have any bookings yet."}),e.jsx(S,{})]})})]})},z=y("/")({component:M});function M(){const t=b({from:"/"});return console.log(t),e.jsxs(e.Fragment,{children:[e.jsx(k,{}),e.jsx(E,{})]})}export{z as Route};
