import{r as l,j as e,v as m,M as b,Q as u,g as h,c as C}from"./index-mPvj14RK.js";import{u as S}from"./useRouteContext-DHoaiiLt.js";import{S as k,N as R}from"./Spinner-DRxqGxDr.js";import{P as p}from"./index-Bb6g11rr.js";import{T as x}from"./Text-CJtaxv_g.js";import{T as B}from"./Title-3enHD3yt.js";import{N as v}from"./NavBar-ChVet01e.js";const j=({roomId:t,onCancel:d})=>{const[a,i]=l.useState(!1),[c,r]=l.useState(!1),o=async()=>{i(!0);const s=h(),{error:n}=await s.from("MeetingRooms").delete().eq("id",t);n?console.error("Error deleting the booking:",n):d(t),i(!1),r(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(m,{style:{marginLeft:"auto"},onClick:()=>r(!0),disabled:a,variant:"filled",color:"#364FC7",radius:"xl",children:"Cancel Booking"}),e.jsxs(b,{opened:c,onClose:()=>r(!1),title:"Cancel Booking",centered:!0,children:[e.jsx(x,{style:{marginBottom:"20px"},children:"Are you sure you want to cancel this booking?"}),e.jsxs(u,{justify:"space-between",grow:!0,children:[e.jsx(m,{variant:"default",onClick:()=>r(!1),disabled:a,children:"No, Keep It"}),e.jsx(m,{onClick:o,disabled:a,color:"#364FC7",variant:"filled",children:"Cancel Booking"})]})]})]})};j.propTypes={roomId:p.number.isRequired,onCancel:p.func.isRequired};const w={display:"flex",justifyContent:"center",marginTop:"200px"},E={display:"flex",flexDirection:"column",padding:"40px",maxWidth:"800px",margin:"0 auto",backgroundColor:"#ffffff",border:"1px solid #e3e3e3",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)"},F={justifyContent:"center",backgroundColor:"#DBE4FF",borderRadius:"20px",padding:"20px",gap:"15px"},M={flex:"100%",padding:"0.8rem 1.5rem",border:"1px solid #364FC7",borderRadius:"2rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},T=()=>{const[t,d]=l.useState([]),[a,i]=l.useState(!0);l.useEffect(()=>{async function o(){i(!0);const s=h(),{data:{user:n},error:f}=await s.auth.getUser();if(f){console.error("Error getting user:",f),i(!1);return}if(n){const{data:y,error:g}=await s.from("MeetingRooms").select("id, Room_name, Start_time, End_time").ilike("User",n.email);g?console.error("Error fetching meeting rooms:",g):d(y)}else console.error("No user logged in.");i(!1)}o()},[]);const c=o=>{d(s=>s.filter(n=>n.id!==o))};if(a)return e.jsxs("div",{style:w,children:[e.jsx(k,{})," "]});const r=o=>new Date(o).toLocaleString("en-US",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1});return e.jsxs("div",{style:E,children:[e.jsx(B,{c:"#364FC7",order:1,style:{marginBottom:"2rem"},children:"My Bookings"}),e.jsx("div",{style:F,children:t.length>0?e.jsx(u,{justify:"space-between",gap:"xs",children:t.map(o=>e.jsxs(u,{style:M,children:[e.jsxs("div",{children:[e.jsx(x,{c:"#364FC7",fw:500,size:"md",children:o.Room_name}),e.jsxs(x,{fw:400,size:"md",children:[r(o.Start_time)," - ",r(o.End_time)]})]}),e.jsx(j,{roomId:o.id,onCancel:c})]},o.id))}):e.jsxs("div",{children:[e.jsx("p",{children:"You donâ€™t have any bookings yet."}),e.jsx(R,{})]})})]})},O=C("/")({component:N});function N(){const t=S({from:"/"});return console.log(t),e.jsxs(e.Fragment,{children:[e.jsx(v,{}),e.jsx(T,{})]})}export{O as Route};
